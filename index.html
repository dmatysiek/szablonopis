<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>QuickDesc</title>
  <link rel="manifest" href="manifest.webmanifest?v=33">
  <meta name="theme-color" content="#0b0b0c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="apple-touch-icon" href="icon-192.png">

  <style>
    :root{
      color-scheme: light dark;
      --bg: #0b0b0c;
      --card: #141416;
      --card-2: #111113;
      --border: rgba(255,255,255,.08);
      --border-strong: rgba(255,255,255,.14);
      --text: #e9e9ea;
      --text-dim: #b8b8bb;
      --accent: #21c0a5;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    *{ box-sizing: border-box; }
    html{ -webkit-text-size-adjust: 100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .wrap{ max-width: 760px; margin: 0 auto; padding: 18px 16px 28px; }

    /* Pasek tytuÅ‚u */
    .topbar{
      position: sticky; top: 0; z-index: 5;
      background: linear-gradient(180deg, #0b0b0c, rgba(11,11,12,.92));
      backdrop-filter: saturate(140%) blur(8px);
      border-bottom: 1px solid var(--border);
    }
    .topbar-inner{ max-width: 760px; margin: 0 auto; padding: 14px 16px; }
    .title{ font-size: 20px; font-weight: 600; letter-spacing:.2px; }

    /* Karty */
    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .card-pad{ padding: 16px; }
    .card + .card{ margin-top: 18px; }

    /* Form */
    .form-grid{ display: grid; gap: 14px; }
    .field label{
      display:block; font-size: 13px; color: var(--text-dim); margin: 0 0 6px;
    }
    .control{
      width:100%;
      height: 46px;
      padding: 10px 12px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: var(--card-2);
      color: var(--text);
      font-size: 17px;                    /* >=16px -> brak auto-zoomu */
      -webkit-text-fill-color: var(--text);
      outline: none;
      transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
      touch-action: manipulation;          /* domyÅ›lnie szybkie tapy */
    }
    /* dla input[number] pozwÃ³l przewijaÄ‡ bez â€tapÃ³wâ€ */
    input[type="number"].control{
      touch-action: pan-y;
    }
    .control:focus{
      border-color: var(--border-strong);
      box-shadow: 0 0 0 3px rgba(33,192,165,.12);
      background: #151619;
    }
    select.control option{ color:var(--text); background: var(--card-2); }

    .checkbox-row{
      display:flex; align-items:center; gap:10px;
      padding: 8px 0 0;
      margin-bottom: 12px;             /* odstÄ™p gdy pole wyÅ‚Ä…czone */
    }
    .checkbox-row input[type="checkbox"]{
      width:18px; height:18px; margin:0; accent-color: var(--accent);
    }

    /* Pole z uwagami */
    #uwagiLabel{ display:none; margin: 0; }

    /* PodglÄ…d */
    pre{ white-space: pre-wrap; word-wrap: break-word; margin:0; font: inherit; line-height:1.45; letter-spacing:.1px; }

    /* Przycisk kopiowania */
    .btn{
      display:block; width:100%;
      border-radius: var(--radius);
      padding: 12px 14px;
      border: 1px solid var(--border);
      background: #1a1b1e;
      color: var(--text); font-weight: 600;
      cursor:pointer;
      transition: background .15s ease, transform .05s ease, border-color .15s ease;
      touch-action: manipulation;
    }
    .btn:hover{ background:#1d2024; border-color: var(--border-strong); }
    .btn:active{ transform: scale(.99); }

    /* Placeholdery â€“ subtelnie szare, takÅ¼e na iOS */
    input.control::placeholder,
    textarea.control::placeholder{
      color: rgba(232,232,236,.50) !important;
      opacity: 1;
    }
    input.control::-webkit-input-placeholder,
    textarea.control::-webkit-input-placeholder{
      color: rgba(232,232,236,.50) !important;
      -webkit-text-fill-color: rgba(232,232,236,.50) !important;
      opacity: 1;
    }
  </style>
</head>
<body>

  <div class="topbar">
    <div class="topbar-inner">
      <div class="title">QuickDesc</div>
    </div>
  </div>

  <div class="wrap">
    <div class="card card-pad">
      <div class="form-grid">

        <div class="field">
          <label>Stan</label>
          <select id="stan" class="control">
            <option value="Dobry">Dobry</option>
            <option value="Bardzo dobry" selected>Bardzo dobry</option>
            <option value="Nowy bez metki">Nowy bez metki</option>
            <option value="Nowy z metkÄ…">Nowy z metkÄ…</option>
            <option value="Åšwietny, jak nowy">Åšwietny, jak nowy</option>
          </select>
        </div>

        <div class="field">
          <label>Rozmiar</label>
          <select id="rozmiar" class="control">
            <option value="XS">XS</option>
            <option value="S" selected>S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="Damski XS">Damski XS</option>
            <option value="Damski S">Damski S</option>
            <option value="Damski M">Damski M</option>
            <option value="Damski L">Damski L</option>
            <option value="Damski XL">Damski XL</option>
            <option value="MÄ™ski XS">MÄ™ski XS</option>
            <option value="MÄ™ski S">MÄ™ski S</option>
            <option value="MÄ™ski M">MÄ™ski M</option>
            <option value="MÄ™ski L">MÄ™ski L</option>
            <option value="MÄ™ski XL">MÄ™ski XL</option>
          </select>
        </div>

        <div class="field">
          <label>Kolor</label>
          <select id="kolor" class="control">
            <option value="Czarny" selected>Czarny</option>
            <option value="BiaÅ‚y">BiaÅ‚y</option>
            <option value="Szary">Szary</option>
            <option value="BrÄ…zowy">BrÄ…zowy</option>
            <option value="Niebieski">Niebieski</option>
            <option value="Granatowy">Granatowy</option>
            <option value="Zielony">Zielony</option>
            <option value="Burgundowy">Burgundowy</option>
            <option value="Fioletowy">Fioletowy</option>
            <option value="Czerwony">Czerwony</option>
            <option value="BeÅ¼owy">BeÅ¼owy</option>
            <option value="Kremowy">Kremowy</option>
            <option value="RÃ³Å¼owy">RÃ³Å¼owy</option>
            <option value="Å»Ã³Å‚ty">Å»Ã³Å‚ty</option>
          </select>
        </div>

        <label class="checkbox-row" id="uwagiRow">
          <input type="checkbox" id="uwagiOn">
          Dodatkowa linijka?
        </label>

        <div class="field" id="uwagiLabel">
          <label>TreÅ›Ä‡ dodatkowej informacjiâ€¦</label>
          <input id="uwagiText" class="control" type="text" placeholder="np. Bluza ma plamÄ™ na rÄ™kawie">
        </div>

        <div class="field">
          <label>DÅ‚ugoÅ›Ä‡ caÅ‚kowita (cm)</label>
          <input id="dlugosc" class="control" type="number" inputmode="decimal" step="1" min="0" placeholder="np. 65" value="65" data-suffix="cm">
        </div>

        <div class="field">
          <label>SzerokoÅ›Ä‡ pod pachami (cm)</label>
          <input id="szerokosc" class="control" type="number" inputmode="decimal" step="1" min="0" placeholder="np. 56" value="56" data-suffix="cm">
        </div>

        <div class="field">
          <label>DÅ‚ugoÅ›Ä‡ od pachy do koÅ„ca rÄ™kawa (cm)</label>
          <input id="rekaw" class="control" type="number" inputmode="decimal" step="1" min="0" placeholder="np. 52" value="52" data-suffix="cm">
        </div>

      </div>
    </div>

    <!-- PodglÄ…d -->
    <div class="card card-pad">
<pre>
ğŸŒŸ Stan: <b><span id="v-stan"></span></b>
ğŸ‘• Rozmiar: <b><span id="v-rozmiar"></span></b>
ğŸ¨ Kolor: <b><span id="v-kolor"></span></b><span id="v-uwagi-wrap" style="display:none"><br>ğŸ‘• <span id="v-uwagi"></span></span>

ğŸ“ Wymiary:
â€¢ DÅ‚ugoÅ›Ä‡ caÅ‚kowita: <b><span id="v-dlugosc">65cm</span></b>
â€¢ SzerokoÅ›Ä‡ pod pachami: <b><span id="v-szerokosc">56cm</span></b>
â€¢ DÅ‚ugoÅ›Ä‡ od pachy do koÅ„ca rÄ™kawa: <b><span id="v-rekaw">52cm</span></b>

ğŸ“© WiÄ™cej informacji na priv ğŸ˜Š

#nike #bluza #kaptur #mÄ™ska #damska #man #woman #hoodie #crewneck #sweatshirt #vintage #unisex #swoosh #air #max #adidas #retro #zipped #oversize #y2k
</pre>
      <button id="copy" class="btn" style="margin-top:12px;">Kopiuj opis</button>
    </div>
  </div>

  <script>
    const LS_KEY = "szablonopis_v1";

    const pairs = [
      ["stan", "v-stan"],
      ["rozmiar", "v-rozmiar"],
      ["kolor", "v-kolor"],
      ["dlugosc", "v-dlugosc"],
      ["szerokosc", "v-szerokosc"],
      ["rekaw", "v-rekaw"],
    ];

    const saved = JSON.parse(localStorage.getItem(LS_KEY) || "{}");
    const state = {};

    // Opcjonalna linijka
    const uwagiOn    = document.getElementById("uwagiOn");
    const uwagiText  = document.getElementById("uwagiText");
    const uwagiWrap  = document.getElementById("v-uwagi-wrap");
    const uwagiSpan  = document.getElementById("v-uwagi");
    const uwagiLabel = document.getElementById("uwagiLabel");
    const uwagiRow   = document.getElementById("uwagiRow");

    if (uwagiOn && saved.uwagiOn) uwagiOn.checked = true;
    if (uwagiText && typeof saved.uwagiText === "string") uwagiText.value = saved.uwagiText;

    function renderUwagi() {
      if (!uwagiOn || !uwagiText || !uwagiLabel || !uwagiWrap || !uwagiSpan || !uwagiRow) return;

      const enabled = uwagiOn.checked;
      const txt = (uwagiText.value || "").trim();

      state.uwagiOn = enabled;
      state.uwagiText = uwagiText.value || "";

      if (enabled) {
        uwagiRow.style.marginBottom = "0px";
        uwagiLabel.style.display = "block";
        uwagiLabel.style.margin = "0 0 12px 0";
      } else {
        uwagiLabel.style.display = "none";
        uwagiRow.style.marginBottom = "12px";
      }

      if (enabled && txt) { uwagiSpan.textContent = txt; uwagiWrap.style.display = "inline"; }
      else { uwagiSpan.textContent = ""; uwagiWrap.style.display = "none"; }
    }
    uwagiOn?.addEventListener("change", () => { renderUwagi(); scheduleSave(); });
    uwagiText?.addEventListener("input", () => { renderUwagi(); scheduleSave(); });
    renderUwagi();

    // Pola formularza
    for (const [inputId, viewId] of pairs) {
      const input = document.getElementById(inputId);
      const view  = document.getElementById(viewId);
      if (!input || !view) continue;

      if (saved[inputId] !== undefined) input.value = saved[inputId];

      const renderValue = () => {
        const raw = input.value?.toString().trim();
        const suffix = input.dataset.suffix || "";
        view.textContent = raw ? (suffix ? `${raw}${suffix}` : raw) : "";
        state[inputId] = input.value;
      };
      renderValue();

      input.addEventListener("input", () => { renderValue(); scheduleSave(); });

      // iOS fix: zanim klikniesz nowy <select>, wyczyÅ›Ä‡ focus ze starego
      // (zapobiega â€miganiuâ€ listy â€“ 1 tap zawsze dziaÅ‚a)
      document.addEventListener('pointerdown', (ev) => {
        const t = ev.target;
        const isSelect = el => el && el.tagName === 'SELECT';
        if (isSelect(t)) {
          const ae = document.activeElement;
          if (isSelect(ae) && ae !== t) {
            try { ae.blur(); } catch (_) {}
          }
        }
      }, true);
    }

    // Auto-select tylko przy TAPIE (nie przy przewijaniu)
    ["dlugosc","szerokosc","rekaw"].forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;

      let startX = 0, startY = 0, moved = false, t0 = 0;
      const THRESHOLD = 6;       // piksele ruchu
      const TAP_TIME  = 300;     // ms

      const selectAll = () => { try { el.select(); } catch(_){} };

      el.addEventListener("pointerdown", (e) => {
        startX = e.clientX || 0;
        startY = e.clientY || 0;
        moved  = false;
        t0     = e.timeStamp || Date.now();
        // UWAGA: bez preventDefault â€” pozwalamy przewijaÄ‡
      });

      el.addEventListener("pointermove", (e) => {
        const dx = Math.abs((e.clientX||0) - startX);
        const dy = Math.abs((e.clientY||0) - startY);
        if (dx > THRESHOLD || dy > THRESHOLD) moved = true;
      });

      el.addEventListener("pointerup", (e) => {
        const dt = (e.timeStamp || Date.now()) - t0;
        if (!moved && dt < TAP_TIME) {
          // traktuj jako tap
          if (document.activeElement !== el) el.focus();
          setTimeout(selectAll, 0);
        }
      });

      // na sam focus zaznacz (np. z klawiatury â€Dalejâ€)
      el.addEventListener("focus", () => setTimeout(selectAll, 0));
    });

    let saveTimer = null;
    function scheduleSave() {
      clearTimeout(saveTimer);
      saveTimer = setTimeout(() => {
        localStorage.setItem(LS_KEY, JSON.stringify(state));
      }, 150);
    }

    document.getElementById("copy").addEventListener("click", async () => {
      const pre = document.querySelector(".card pre") || document.querySelector("pre");
      const text = pre ? pre.innerText : "";
      try {
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById("copy");
        const old = btn.textContent; btn.textContent = "Skopiowano âœ“";
        setTimeout(()=> btn.textContent = old, 1200);
      } catch { alert("Nie udaÅ‚o siÄ™ skopiowaÄ‡. Zaznacz tekst rÄ™cznie i uÅ¼yj Ctrl/Cmd+C."); }
    });

    window.addEventListener("beforeunload", () => {
      localStorage.setItem(LS_KEY, JSON.stringify(state));
    });
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js?v=33');
    }
  </script>
</body>
</html>
